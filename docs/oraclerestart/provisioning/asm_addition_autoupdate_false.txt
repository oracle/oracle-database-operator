#### Status before the additional ASM Disks additional

$ kubectl describe oraclerestarts.database.oracle.com/oraclerestart-sample -n orestart
Name:         oraclerestart-sample
Namespace:    orestart
Labels:       <none>
Annotations:  OracleRestarts.database.oracle.com/old-spec:
                {"instDetails":{"name":"dbmc1","hostSwLocation":"/scratch/orestart/","workerNode":["10.0.10.58"],"envFile":"dbmc1oraclerestart-sample-cmap...
API Version:  database.oracle.com/v4
Kind:         OracleRestart
Metadata:
  Creation Timestamp:  2026-02-16T04:24:16Z
  Finalizers:
    database.oracle.com/oraclerestartfinalizer
  Generation:        1
  Resource Version:  301973608
  UID:               443314dc-1ae0-4833-bf0b-870affafc370
Spec:
  Asm Disk Group Details:
    Disks:
      /dev/disk/by-partlabel/asm-disk1
      /dev/disk/by-partlabel/asm-disk2
    Name:        DATA
    Redundancy:  EXTERNAL
    Type:        CRSDG
  Config Params:
    Cpu Count:    4
    Db Base:      /u01/app/oracle
    Db Char Set:  AL32UTF8
    Db Home:      /u01/app/oracle/product/19c/dbhome_1
    Db Name:      PORCLCDB
    Db Response File:
    Db Sw Zip File:  db_home.zip
    Grid Base:       /u01/app/grid
    Grid Home:       /u01/app/19c/grid
    Grid Response File:
    Grid Sw Zip File:        grid_home.zip
    Host Sw Stage Location:  /scratch/software/stage
    Inventory:               /u01/app/oraInventory
    Pga Size:                4G
    Processes:               2000
    Sga Size:                8G
    Sw Mount Location:       /u01
  Db Secret:
    Key File Mount Location:  /mnt/.dbsecrets
    Key File Name:            key.pem
    Name:                     db-user-pass-pkutl
    Pwd File Mount Location:  /mnt/.dbsecrets
    Pwd File Name:            pwdfile.enc
  Enable Ons:                 enable
  Image:                      dbocir/oracle/database-orestart:19.3.0-slim
  Image Pull Policy:          IfNotPresent
  Inst Details:
    Host Sw Location:  /scratch/orestart/
    Name:              dbmc1
    Worker Node:
      10.0.10.58
  Lb Service:
  Node Port Svc:
    Name:  dbmc1-service-nodeport
    Port Mappings:
      Node Port:    30007
      Port:         1521
      Protocol:     TCP
      Target Port:  1521
      Node Port:    30200
      Port:         6200
      Protocol:     TCP
      Target Port:  6200
    Svc Type:       nodeport
  Resources:
    Limits:
      Cpu:     4
      Memory:  16Gi
    Requests:
      Cpu:     4
      Memory:  16Gi
  Service Details:
    Name:  soepdb
  Ssh Key Secret:
    Key Mount Location:    /mnt/.ssh
    Name:                  ssh-key-secret
    Priv Key Secret Name:  ssh-privkey
    Pub Key Secret Name:   ssh-pubkey
Status:
  Oracle Restart Nodes:
    Name:  dbmc1-0
    Node Details:
      Instance State:  OPEN
      Pod State:       AVAILABLE
      Cluster State:   HEALTHY
      Mounted Devices:
        /dev/disk/by-partlabel/asm-disk1
        /dev/disk/by-partlabel/asm-disk2
      State:  AVAILABLE
  Asm Disk Groups:
    Disks:
      Name:        /dev/disk/by-partlabel/asm-disk1
      Size In Gb:  49
      Valid:       true
      Name:        /dev/disk/by-partlabel/asm-disk2
      Size In Gb:  49
      Valid:       true
    Name:          DATA
    Redundancy:    EXTERN
    Type:          CRSDG
  Conditions:
    Last Transition Time:  2026-02-16T04:24:26Z
    Message:               reconcile completed successfully
    Observed Generation:   1
    Reason:                LastReconcileCycleCompleted
    Status:                True
    Type:                  ReconcileComplete
  Config Params:
    Db Base:  /u01/app/oracle
    Db Home:  /u01/app/oracle/product/19c/dbhome_1
    Db Name:  PORCLCDB
    Db Response File:
    Grid Base:  /u01/app/grid
    Grid Home:  /u01/app/19c/grid
    Grid Response File:
    Inventory:     /u01/app/oraInventory
  Connect String:  dbmc1-0:1521/PORCLCDB
  Db Secret:
    Key File Mount Location:  /mnt/.dbsecrets
    Key File Name:            key.pem
    Name:                     db-user-pass-pkutl
    Pwd File Mount Location:  /mnt/.dbsecrets
    Pwd File Name:            pwdfile.enc
  Db State:                   OPEN
  External Connect String:    129.146.0.149:30007/soepdb
  Pdb Connect String:         dbmc1-0:1521/ORCLPDB
  Release Update:             19.28.0.0.0
  Resources:
    Limits:
      Cpu:     4
      Memory:  16Gi
    Requests:
      Cpu:     4
      Memory:  16Gi
  Role:        PRIMARY
  Security Context:
    Sysctls:
      Name:   kernel.shmmax
      Value:  9663676416
      Name:   kernel.shmall
      Value:  2359296
      Name:   kernel.sem
      Value:  250 32000 100 128
      Name:   kernel.shmmni
      Value:  4096
  Service Details:
    Name:       soepdb
    Svc State:  service soepdb is running
  State:        AVAILABLE
Events:         <none>



-- From inside the Oracle Restart Pod:
[grid@dbmc1-0 ~]$ export ORACLE_SID=+ASM
[grid@dbmc1-0 ~]$ asmcmd lsdsk
Path
/dev/disk/by-partlabel/asm-disk1
/dev/disk/by-partlabel/asm-disk2
[grid@dbmc1-0 ~]$ ls -lrt /dev/disk/by-partlabel/asm-disk*
brw-rw----. 1 grid asmadmin 8, 33 Feb 16 05:00 /dev/disk/by-partlabel/asm-disk2
brw-rw----. 1 grid asmadmin 8, 49 Feb 16 05:00 /dev/disk/by-partlabel/asm-disk1



### Apply the file "orestart_prov_asm_disk_addition_autoupdate_false.yaml" to add two new ASM Disks

$ kubectl logs -f pod/oracle-database-operator-controller-manager-bc8dd8f68-pwfdk -n oracle-database-operator-system
.
.
2026-02-16T05:02:23Z	INFO	controllers.OracleRestart	Detected addition of ASM disks	{"addedAsmDisks": ["/dev/disk/by-partlabel/asm-disk3", "/dev/disk/by-partlabel/asm-disk4"]}
2026-02-16T05:02:23Z	INFO	controllers.OracleRestart	ASM AutoUpdate toggled	{"diskgroup": "DATA", "old": "", "new": "false"}
2026-02-16T05:02:23Z	INFO	controllers.OracleRestart	Validate New ASM Disks
2026-02-16T05:02:23Z	INFO	controllers.OracleRestart	Creating DaemonSet	{"name": "disk-check-daemonset"}
2026-02-16T05:02:23Z	INFO	controllers.OracleRestart	DaemonSet created successfully	{"DaemonSet.Name": "disk-check-daemonset"}
2026-02-16T05:02:33Z	INFO	controllers.OracleRestart	PV Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pv-5bf2e507-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:02:33Z	INFO	controllers.OracleRestart	PVC Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pvc-5bf2e507-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:02:33Z	INFO	controllers.OracleRestart	PV Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pv-fdd90757-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:02:33Z	INFO	controllers.OracleRestart	PVC Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pvc-fdd90757-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:02:33Z	INFO	controllers.OracleRestart	Creating a new PV	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pv-51a00f0c-oraclerestart-sample"}
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	Creating a PVC	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample"}
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	Creating a new PV	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pv-33a683bc-oraclerestart-sample"}
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	Creating a PVC	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample"}
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	DaemonSet deleted successfully	{"DaemonSet.Name": "disk-check-daemonset"}
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	Provided ASM Disks are valid, proceeding further
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	ConfigMap env key changed, updating	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample"}
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	Config Map updated successfully with new asm details
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	Change State to UPDATING
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	Reconciling ASM DiskGroup status
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	Oracle Restart Object updated with updateOracleRestartInstStatus
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	StatefulSet spec differs for volume devices, updating StatefulSet (pods may be recreated)	{"oracleRestart.Namespace": "orestart", "oracleRestart.Name": "oraclerestart-sample", "StatefulSet.Namespace": "orestart", "StatefulSet.Name": "dbmc1"}
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	StatefulSet update applied, waiting for pod recreation	{"oracleRestart.Namespace": "orestart", "oracleRestart.Name": "oraclerestart-sample", "StatefulSet.Namespace": "orestart", "StatefulSet.Name": "dbmc1"}
2026-02-16T05:02:34Z	INFO	controllers.OracleRestart	Waiting for StatefulSet update to be applied	{"oracleRestart.Namespace": "orestart", "oracleRestart.Name": "oraclerestart-sample", "StatefulSet.Namespace": "orestart", "StatefulSet.Name": "dbmc1"}
2026-02-16T05:02:39Z	INFO	controllers.OracleRestart	StatefulSet update is applied successfully	{"oracleRestart.Namespace": "orestart", "oracleRestart.Name": "oraclerestart-sample", "StatefulSet.Namespace": "orestart", "StatefulSet.Name": "dbmc1"}
2026-02-16T05:05:09Z	INFO	OracleRestart-resource	default	{"name": "oraclerestart-sample"}
2026-02-16T05:05:09Z	INFO	controllers.OracleRestart	Oracle Restart Object annotations updated with current spec annotation
2026-02-16T05:05:09Z	INFO	controllers.OracleRestart	ONS Running successfully	{"podName": "dbmc1-0"}
2026-02-16T05:05:09Z	INFO	controllers.OracleRestart
2026-02-16T05:05:09Z	INFO	controllers.OracleRestart	Reconcile completed. Requeuing....
2026-02-16T05:05:19Z	INFO	controllers.OracleRestart	Reconciling ASM DiskGroup status
2026-02-16T05:05:19Z	INFO	controllers.OracleRestart	Oracle Restart Object updated with updateOracleRestartInstStatus
2026-02-16T05:05:19Z	INFO	controllers.OracleRestart	Completed Update of Oracle Restart instance status
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Updating Oracle Restart instance status with validateoraclerestartdb	{"Instance": "oraclerestart-sample"}
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Updated Oracle Restart instance status with validateoraclerestartdb	{"Instance": "oraclerestart-sample"}
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Updated Oracle Restart instance status successfully	{"Instance": "oraclerestart-sample"}
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Returning from updateReconcileStatus
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Reconcile requested
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Entering reconcile validation
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Reconciling ASM DiskGroup status
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Completed reconcile validation
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Reconciling ASM DiskGroup status
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Detected addition of ASM disks	{"addedAsmDisks": ["/dev/disk/by-partlabel/asm-disk3", "/dev/disk/by-partlabel/asm-disk4"]}
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Validate New ASM Disks
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	Creating DaemonSet	{"name": "disk-check-daemonset"}
2026-02-16T05:05:36Z	INFO	controllers.OracleRestart	DaemonSet created successfully	{"DaemonSet.Name": "disk-check-daemonset"}
2026-02-16T05:05:46Z	INFO	controllers.OracleRestart	PV Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pv-5bf2e507-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:05:46Z	INFO	controllers.OracleRestart	PVC Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pvc-5bf2e507-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:05:46Z	INFO	controllers.OracleRestart	PV Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pv-fdd90757-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:05:46Z	INFO	controllers.OracleRestart	PVC Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pvc-fdd90757-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:05:46Z	INFO	controllers.OracleRestart	PV Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pv-51a00f0c-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:05:46Z	INFO	controllers.OracleRestart	PVC Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pvc-51a00f0c-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:05:46Z	INFO	controllers.OracleRestart	PV Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pv-33a683bc-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:05:46Z	INFO	controllers.OracleRestart	PVC Found	{"Instance.Namespace": "orestart", "Instance.Name": "oraclerestart-sample", "dep.Name": "asm-pvc-33a683bc-oraclerestart-sample", "dgType": "CRSDG"}
2026-02-16T05:05:51Z	INFO	controllers.OracleRestart	DaemonSet deleted successfully	{"DaemonSet.Name": "disk-check-daemonset"}
2026-02-16T05:05:51Z	INFO	controllers.OracleRestart	Provided ASM Disks are valid, proceeding further
2026-02-16T05:05:51Z	INFO	controllers.OracleRestart	Config Map updated successfully with new asm details
2026-02-16T05:05:51Z	INFO	controllers.OracleRestart	StatefulSet matches for  Volumes, SFS wont be updated	{"oracleRestart.Namespace": "orestart", "oracleRestart.Name": "oraclerestart-sample", "StatefulSet.Namespace": "orestart", "StatefulSet.Name": "dbmc1"}
2026-02-16T05:06:21Z	INFO	OracleRestart-resource	default	{"name": "oraclerestart-sample"}
2026-02-16T05:06:21Z	INFO	controllers.OracleRestart	Oracle Restart Object annotations updated with current spec annotation
2026-02-16T05:06:22Z	INFO	controllers.OracleRestart	ONS Running successfully	{"podName": "dbmc1-0"}
2026-02-16T05:06:22Z	INFO	controllers.OracleRestart
2026-02-16T05:06:22Z	INFO	controllers.OracleRestart	Reconcile completed. Requeuing....
2026-02-16T05:06:31Z	INFO	controllers.OracleRestart	Reconciling ASM DiskGroup status
2026-02-16T05:06:31Z	INFO	controllers.OracleRestart	Oracle Restart Object updated with updateOracleRestartInstStatus
2026-02-16T05:06:31Z	INFO	controllers.OracleRestart	Completed Update of Oracle Restart instance status



###############################################################
### During this operation, the "pod/dbmc1-0" will be recreated
###############################################################



### Status after the Disks are added with "autoUpdate=true"

$ kubectl describe oraclerestarts.database.oracle.com/oraclerestart-sample -n orestart
Name:         oraclerestart-sample
Namespace:    orestart
Labels:       <none>
Annotations:  OracleRestarts.database.oracle.com/old-spec:
                {"instDetails":{"name":"dbmc1","hostSwLocation":"/scratch/orestart/","workerNode":["10.0.10.58"],"envFile":"dbmc1oraclerestart-sample-cmap...
API Version:  database.oracle.com/v4
Kind:         OracleRestart
Metadata:
  Creation Timestamp:  2026-02-16T04:24:16Z
  Finalizers:
    database.oracle.com/oraclerestartfinalizer
  Generation:        2
  Resource Version:  301975768
  UID:               443314dc-1ae0-4833-bf0b-870affafc370
Spec:
  Asm Disk Group Details:
    Auto Update:  false
    Disks:
      /dev/disk/by-partlabel/asm-disk1
      /dev/disk/by-partlabel/asm-disk2
      /dev/disk/by-partlabel/asm-disk3
      /dev/disk/by-partlabel/asm-disk4
    Name:        DATA
    Redundancy:  EXTERNAL
    Type:        CRSDG
  Config Params:
    Cpu Count:    4
    Db Base:      /u01/app/oracle
    Db Char Set:  AL32UTF8
    Db Home:      /u01/app/oracle/product/19c/dbhome_1
    Db Name:      PORCLCDB
    Db Response File:
    Db Sw Zip File:  db_home.zip
    Grid Base:       /u01/app/grid
    Grid Home:       /u01/app/19c/grid
    Grid Response File:
    Grid Sw Zip File:        grid_home.zip
    Host Sw Stage Location:  /scratch/software/stage
    Inventory:               /u01/app/oraInventory
    Pga Size:                4G
    Processes:               2000
    Sga Size:                8G
    Sw Mount Location:       /u01
  Db Secret:
    Key File Mount Location:  /mnt/.dbsecrets
    Key File Name:            key.pem
    Name:                     db-user-pass-pkutl
    Pwd File Mount Location:  /mnt/.dbsecrets
    Pwd File Name:            pwdfile.enc
  Enable Ons:                 enable
  Image:                      dbocir/oracle/database-orestart:19.3.0-slim
  Image Pull Policy:          IfNotPresent
  Inst Details:
    Host Sw Location:  /scratch/orestart/
    Name:              dbmc1
    Worker Node:
      10.0.10.58
  Lb Service:
  Node Port Svc:
    Name:  dbmc1-service-nodeport
    Port Mappings:
      Node Port:    30007
      Port:         1521
      Protocol:     TCP
      Target Port:  1521
      Node Port:    30200
      Port:         6200
      Protocol:     TCP
      Target Port:  6200
    Svc Type:       nodeport
  Resources:
    Limits:
      Cpu:     4
      Memory:  16Gi
    Requests:
      Cpu:     4
      Memory:  16Gi
  Service Details:
    Name:  soepdb
  Ssh Key Secret:
    Key Mount Location:    /mnt/.ssh
    Name:                  ssh-key-secret
    Priv Key Secret Name:  ssh-privkey
    Pub Key Secret Name:   ssh-pubkey
Status:
  Oracle Restart Nodes:
    Name:  dbmc1-0
    Node Details:
      Instance State:  OPEN
      Pod State:       AVAILABLE
      Cluster State:   HEALTHY
      Mounted Devices:
        /dev/disk/by-partlabel/asm-disk1
        /dev/disk/by-partlabel/asm-disk2
        /dev/disk/by-partlabel/asm-disk3
        /dev/disk/by-partlabel/asm-disk4
      State:  AVAILABLE
  Asm Disk Groups:
    Auto Update:  false
    Disks:
      Name:        /dev/disk/by-partlabel/asm-disk1
      Size In Gb:  49
      Valid:       true
      Name:        /dev/disk/by-partlabel/asm-disk2
      Size In Gb:  49
      Valid:       true
      Name:        /dev/disk/by-partlabel/asm-disk3
      Size In Gb:  49
      Valid:       true
      Name:        /dev/disk/by-partlabel/asm-disk4
      Size In Gb:  49
      Valid:       true
    Name:          DATA
    Redundancy:    EXTERNAL
    Type:          CRSDG
  Conditions:
    Last Transition Time:  2026-02-16T04:24:26Z
    Message:               reconcile completed successfully
    Observed Generation:   1
    Reason:                LastReconcileCycleCompleted
    Status:                True
    Type:                  ReconcileComplete
  Config Params:
    Db Base:  /u01/app/oracle
    Db Home:  /u01/app/oracle/product/19c/dbhome_1
    Db Name:  PORCLCDB
    Db Response File:
    Grid Base:  /u01/app/grid
    Grid Home:  /u01/app/19c/grid
    Grid Response File:
    Inventory:     /u01/app/oraInventory
  Connect String:  dbmc1-0:1521/PORCLCDB
  Db Secret:
    Key File Mount Location:  /mnt/.dbsecrets
    Key File Name:            key.pem
    Name:                     db-user-pass-pkutl
    Pwd File Mount Location:  /mnt/.dbsecrets
    Pwd File Name:            pwdfile.enc
  Db State:                   OPEN
  External Connect String:    129.146.0.149:30007/soepdb
  Pdb Connect String:         dbmc1-0:1521/ORCLPDB
  Release Update:             19.28.0.0.0
  Resources:
    Limits:
      Cpu:     4
      Memory:  16Gi
    Requests:
      Cpu:     4
      Memory:  16Gi
  Role:        PRIMARY
  Security Context:
    Sysctls:
      Name:   kernel.shmmax
      Value:  9663676416
      Name:   kernel.shmall
      Value:  2359296
      Name:   kernel.sem
      Value:  250 32000 100 128
      Name:   kernel.shmmni
      Value:  4096
  Service Details:
    Name:       soepdb
    Svc State:  service soepdb is running
  State:        AVAILABLE
Events:         <none>




-- From inside the Oracle Restart Pod:

[grid@dbmc1-0 ~]$ export ORACLE_SID=+ASM
[grid@dbmc1-0 ~]$ asmcmd lsdsk
Path
/dev/disk/by-partlabel/asm-disk1
/dev/disk/by-partlabel/asm-disk2

[grid@dbmc1-0 ~]$ ls -lrt /dev/disk/by-partlabel/asm-disk*
brw-rw----. 1 grid asmadmin 8, 81 Feb 16 05:03 /dev/disk/by-partlabel/asm-disk4
brw-rw----. 1 grid asmadmin 8, 65 Feb 16 05:03 /dev/disk/by-partlabel/asm-disk3
brw-rw----. 1 grid asmadmin 8, 33 Feb 16 05:07 /dev/disk/by-partlabel/asm-disk2
brw-rw----. 1 grid asmadmin 8, 49 Feb 16 05:07 /dev/disk/by-partlabel/asm-disk1