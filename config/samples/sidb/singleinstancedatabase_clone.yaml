#
# Copyright (c) 2022, Oracle and/or its affiliates. 
# Licensed under the Universal Permissive License v 1.0 as shown at http://oss.oracle.com/licenses/upl.
#

apiVersion: database.oracle.com/v1alpha1
kind: SingleInstanceDatabase
metadata:
  name: sidb-sample-clone
  namespace: default
spec:
  
  ## Use only alphanumeric characters for sid
  sid: ORCL2
  
  ## A source database ref to clone from.
  ## Make sure the source database has been created by applying singeinstancedatabase_create.yaml
  cloneFrom: sidb-sample

  ## Should refer to SourceDB secret
  ## Secret containing SIDB password mapped to secretKey 
  ## This secret will be deleted after creation of the database unless keepSecret is set to true
  adminPassword:
    secretName: admin-secret-1
    secretKey: oracle_pwd
    keepSecret: true

  ## Database image details
  ## This image should be the same as the source DB image being cloned
  ## or a patched DB image built from the souce DB image following instructions at
  ## https://github.com/oracle/docker-images/tree/main/OracleDatabase/SingleInstance/extensions/patching
  image:
    pullFrom: container-registry.oracle.com/database/enterprise:latest
    pullSecrets: oracle-container-registry-secret

  ## size : Minimum size of pvc | class : PVC storage Class
  ## AccessMode can only accept one of ReadWriteOnce, ReadWriteMany
  ## Below mentioned storageClass/accessMode applies to OCI block volumes. Update appropriately for other types of persistent volumes.
  persistence:
    size: 100Gi
    storageClass: "oci"
    accessMode: "ReadWriteOnce"
